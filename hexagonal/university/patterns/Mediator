//Зменшує залежність між об’єктами, організовуючи їхню взаємодію через центральний посередник.

#include <iostream>
using namespace std;

class Mediator;

class Colleague {
protected:
    Mediator* mediator;
public:
    Colleague(Mediator* m) : mediator(m) {}
    virtual void send(string msg) = 0;
    virtual void receive(string msg) = 0;
};

class Mediator {
public:
    virtual void notify(Colleague* sender, string msg) = 0;
};

class ConcreteColleague : public Colleague {
public:
    ConcreteColleague(Mediator* m) : Colleague(m) {}
    void send(string msg) override;
    void receive(string msg) override { cout << "Received: " << msg << endl; }
};

class ConcreteMediator : public Mediator {
    ConcreteColleague* c1;
    ConcreteColleague* c2;
public:
    void setColleagues(ConcreteColleague* a, ConcreteColleague* b) { c1 = a; c2 = b; }
    void notify(Colleague* sender, string msg) override {
        if (sender == c1) c2->receive(msg);
        else c1->receive(msg);
    }
};

void ConcreteColleague::send(string msg) { mediator->notify(this, msg); }
